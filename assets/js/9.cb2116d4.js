(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{192:function(e,i,s){"use strict";s.r(i);var t=s(2),a=Object(t.a)({},function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http","aria-hidden":"true"}},[e._v("#")]),e._v(" HTTP")]),e._v(" "),s("h2",{attrs:{id:"_1-游览器缓存机制（强缓存，弱缓存）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-游览器缓存机制（强缓存，弱缓存）","aria-hidden":"true"}},[e._v("#")]),e._v(" 1. 游览器缓存机制（强缓存，弱缓存）")]),e._v(" "),s("h3",{attrs:{id:"强缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强缓存","aria-hidden":"true"}},[e._v("#")]),e._v(" 强缓存")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> General\nRequest URL:http://yangdongxi.seller.mockuai.com/bossmanager/wap/domain/get.do\nRequest Method:GET\nStatus Code:200 OK\nRemote Address:115.29.239.224:80\nReferrer Policy:no-referrer-when-downgrade\n\n> Response Headers\nAccept-Charset:big5, big5-hkscs, euc-jp, euc-kr, gb18030, gb2312, gbk, ibm-thai, ibm00858, ibm01140, ibm01141, ibm01142, ibm01143, ibm01144, ibm01145, ibm01146, ibm01147, ibm01148, ibm01149, ibm037, ibm1026, ibm1047, ibm273, ibm277, ibm278, ibm280, ibm284, ibm285, ibm290, ibm297, ibm420, ibm424, ibm437, ibm500, ibm775, ibm850, ibm852, ibm855, ibm857, ibm860, ibm861, ibm862, ibm863, ibm864, ibm865, ibm866, ibm868, ibm869, ibm870, ibm871, ibm918, iso-2022-cn, iso-2022-jp, iso-2022-jp-2, iso-2022-kr, iso-8859-1, iso-8859-13, iso-8859-15, iso-8859-2, iso-8859-3, iso-8859-4, iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9, jis_x0201, jis_x0212-1990, koi8-r, koi8-u, shift_jis, tis-620, us-ascii, utf-16, utf-16be, utf-16le, utf-32, utf-32be, utf-32le, utf-8, windows-1250, windows-1251, windows-1252, windows-1253, windows-1254, windows-1255, windows-1256, windows-1257, windows-1258, windows-31j, x-big5-hkscs-2001, x-big5-solaris, x-compound_text, x-euc-jp-linux, x-euc-tw, x-eucjp-open, x-ibm1006, x-ibm1025, x-ibm1046, x-ibm1097, x-ibm1098, x-ibm1112, x-ibm1122, x-ibm1123, x-ibm1124, x-ibm1364, x-ibm1381, x-ibm1383, x-ibm300, x-ibm33722, x-ibm737, x-ibm833, x-ibm834, x-ibm856, x-ibm874, x-ibm875, x-ibm921, x-ibm922, x-ibm930, x-ibm933, x-ibm935, x-ibm937, x-ibm939, x-ibm942, x-ibm942c, x-ibm943, x-ibm943c, x-ibm948, x-ibm949, x-ibm949c, x-ibm950, x-ibm964, x-ibm970, x-iscii91, x-iso-2022-cn-cns, x-iso-2022-cn-gb, x-iso-8859-11, x-jis0208, x-jisautodetect, x-johab, x-macarabic, x-maccentraleurope, x-maccroatian, x-maccyrillic, x-macdingbat, x-macgreek, x-machebrew, x-maciceland, x-macroman, x-macromania, x-macsymbol, x-macthai, x-macturkish, x-macukraine, x-ms932_0213, x-ms950-hkscs, x-ms950-hkscs-xp, x-mswin-936, x-pck, x-sjis_0213, x-utf-16le-bom, x-utf-32be-bom, x-utf-32le-bom, x-windows-50220, x-windows-50221, x-windows-874, x-windows-949, x-windows-950, x-windows-iso2022jp\nAccess-Control-Allow-Headers:Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, X-E4M-With\nAccess-Control-Allow-Methods:GET, POST, OPTIONS\nAccess-Control-Allow-Origin:*\nConnection:keep-alive\nContent-Length:53\nContent-Type:application/json;charset=utf-8\nDate:Thu, 04 Jan 2018 02:18:10 GMT\nServer:Tengine/2.1.2\n\n> Request Headers\nAccept:application/json, text/javascript, */*; q=0.01\nAccept-Encoding:gzip, deflate\nAccept-Language:zh-CN,zh;q=0.9\nCache-Control:no-cache\nConnection:keep-alive\nCookie:JSESSIONID=72935BC33DB013063F2DF99BD89D3DBC; username=jishu; role_mark=3; root_role=undefined; is_super=0; is_multi_mall=0; session_key=null; higoMark=1; from_url=yangdongxi.seller.mockuai.com; user_id=91; biz_code=yangdongxi; user_type=1; domain=m.hzfenxianghui.com; ak=0efa3aa4c1d059043ec35cec5b6625d1; ap=6415e5876fa6c32641f4f08e1eb693be; Hm_lvt_6fbe7cc5b60c0a0fc5de3d7b387ee31f=1512548721,1513563511; Hm_lpvt_6fbe7cc5b60c0a0fc5de3d7b387ee31f=1514281204; route=debec577b74b46468980f4122a736cfa; access_token=JWT%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOiJ5YW5nZG9uZ3hpIiwiZXhwaXJlcyI6MTUxNTA3NTQ4MzU4Mn0.KcHh2OHWyL_16qpdOzvZFe2eE3AYfEQaPBMg_FBPvzQ\nHost:yangdongxi.seller.mockuai.com\nPragma:no-cache\nReferer:http://yangdongxi.seller.mockuai.com/bossmanager/html/seller_info/index.html\nUser-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36\nX-Requested-With:XMLHttpRequest\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br")])]),s("h4",{attrs:{id:"缓存控制头-cache-control"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存控制头-cache-control","aria-hidden":"true"}},[e._v("#")]),e._v(" 缓存控制头 - Cache-Control")]),e._v(" "),s("p",[e._v("表一：")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[e._v("Cache-directive")]),e._v(" "),s("th",{staticStyle:{"text-align":"left"}},[e._v("说明")])])]),e._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("public")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("所有内容都将被缓存")])]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("private")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("内容只缓存到私有缓存中")])]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("no-cache")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("所有内容都不会被缓存")])]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("no-store")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("所有内容都不会被缓存到缓存或 Internet 临时文件中")])]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("must-revalidation/proxy-revalidation")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("如果缓存的内容失效，请求必须发送到服务器/代理以进行重新验证")])]),e._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[e._v("max-age=xxx (xxx is numeric)")]),e._v(" "),s("td",{staticStyle:{"text-align":"left"}},[e._v("缓存的内容将在 xxx 秒后失效, 这个选项只在HTTP 1.1可用, 并如果和Last-Modified一起使用时, 优先级较高")])])])]),e._v(" "),s("p",[e._v("如果 "),s("code",[e._v("cache-control")]),e._v(" 有 "),s("code",[e._v("max-age/s-maxage")]),e._v(" 则过期时间等于 "),s("code",[e._v("date + max-age/s-maxage")]),e._v("。如果没有则用 "),s("code",[e._v("expires")]),e._v(" 作为过期时间。")]),e._v(" "),s("h4",{attrs:{id:"过期头-expires"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过期头-expires","aria-hidden":"true"}},[e._v("#")]),e._v(" 过期头 - Expires")]),e._v(" "),s("p",[e._v("Http1.0 中的标准，表明过期时间，注意此处的时间都是指的是服务器的时间。")]),e._v(" "),s("p",[e._v("譬如："),s("code",[e._v("Expires: Thu, 04 Jan 2018 03:15:58 GMT")]),e._v("。")]),e._v(" "),s("p",[e._v("存在的问题：服务器时间与客户端时间的不一致，就会导致缓存跟期待效果出现偏差。")]),e._v(" "),s("h3",{attrs:{id:"弱缓存（协商缓存）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#弱缓存（协商缓存）","aria-hidden":"true"}},[e._v("#")]),e._v(" 弱缓存（协商缓存）")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("HTTP/1.1 200 OK\nDate: Thu, 04 Jan 2018 03:10:58 GMT\nVia: 1.1 varnish\nCache-Control: max-age=300\nX-Served-By: cache-hnd18736-HND\nX-Cache: HIT\nX-Cache-Hits: 1\nX-Timer: S1515035459.944267,VS0,VE0\nAccess-Control-Allow-Origin: *\nX-Fastly-Request-ID: b3a6b8622c580ab51e31a6dbf42596ce537eef03\nExpires: Thu, 04 Jan 2018 03:15:58 GMT\nSource-Age: 1849727\nVary: Authorization,Accept-Encoding\nContent-Type: image/jpeg\nContent-Security-Policy: default-src 'none'\nEtag: \"5ffdaa4768eefcca6f0e3d16ce6a06c20c354792\"\nLast-Modified: Fri, 19 Aug 2016 02:03:35 GMT\nTiming-Allow-Origin: https://github.com\nX-Content-Type-Options: nosniff\nX-Frame-Options: deny\nX-Xss-Protection: 1; mode=block\nX-GitHub-Request-Id: B5E0:1A39E:8284BE:8ACF77:5A3161C3\nContent-Length: 1195\nAccept-Ranges: bytes\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br")])]),s("p",[e._v("浏览器会向服务器发送请求，同时如果上一次的缓存中有 "),s("code",[e._v("Last-modified")]),e._v(" 和 "),s("code",[e._v("Etag")]),e._v(" 字段，\n浏览器将在 "),s("code",[e._v("request header")]),e._v(" 中加入 "),s("code",[e._v("If-Modified-Since")]),e._v("（对应于 "),s("code",[e._v("Last-modified")]),e._v(" ）， 和 "),s("code",[e._v("If-None-Match")]),e._v("（对应于 "),s("code",[e._v("Etag")]),e._v(" ）。")]),e._v(" "),s("ul",[s("li",[e._v("Last-modified: 表明请求的资源上次的修改时间。")]),e._v(" "),s("li",[e._v("If-Modified-Since：客户端保留的资源上次的修改时间。")]),e._v(" "),s("li",[e._v("Etag：资源的内容标识。（不唯一，通常为文件的md5或者一段hash值，只要保证写入和验证时的方法一致即可）")]),e._v(" "),s("li",[e._v("If-None-Match： 客户端保留的资源内容标识。")])])])},[],!1,null,null,null);i.default=a.exports}}]);